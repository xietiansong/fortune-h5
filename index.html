<script>
  /** 64 å¦ç­¾æ–‡ï¼ˆçœç•¥ï¼Œè¿™éƒ¨åˆ†ä¿æŒä¸å˜ï¼‰ **/

  /** å·¥å…·ï¼šè·å–ä»Šå¤© YYYY-MM-DD */
  function getToday() {
    const d = new Date();
    return `${d.getFullYear()}-${d.getMonth() + 1}-${d.getDate()}`;
  }

  /** ä»Šæ—¥è¿åŠ¿ï¼šä¸€å¤©åªèƒ½æŠ½ä¸€æ¬¡ */
  function showFortune() {
    const today = getToday();
    const savedDate = localStorage.getItem("fortune_date");
    const savedFortune = localStorage.getItem("fortune_text");

    // å¦‚æœä»Šå¤©æŠ½è¿‡ï¼Œç›´æ¥æ˜¾ç¤ºç»“æœ
    if (savedDate === today && savedFortune) {
      document.getElementById("fortune-result").innerHTML =
        "ï¼ˆä»Šæ—¥å·²æŠ½ï¼‰<br>" + savedFortune;
      return;
    }

    // ç¬¬ä¸€æ¬¡æŠ½ï¼šéšæœºç”Ÿæˆå¹¶ä¿å­˜
    const index = Math.floor(Math.random() * fortunes.length);
    const fortune = fortunes[index];

    localStorage.setItem("fortune_date", today);
    localStorage.setItem("fortune_text", fortune);

    document.getElementById("fortune-result").innerHTML = fortune;
  }

  /** ä»Šæ—¥æ˜¯å¦å®œæŠ•ç¨¿ï¼šä¸€å¤©åªèƒ½æŠ½ä¸€æ¬¡ */
  function checkSubmit() {
    const today = getToday();
    const savedDate = localStorage.getItem("submit_date");
    const savedSubmit = localStorage.getItem("submit_text");

    if (savedDate === today && savedSubmit) {
      document.getElementById("submit-result").innerHTML =
        "ï¼ˆä»Šæ—¥å·²æŸ¥çœ‹ï¼‰<br>" + savedSubmit;
      return;
    }

    // ç¬¬ä¸€æ¬¡æŠ½ï¼šéšæœºç”Ÿæˆ
    const options = [
      "ğŸŸ¢ã€å®œæŠ•ç¨¿ã€‘çŠ¶æ€è‰¯å¥½ã€æ€è·¯æ¸…æ™°ï¼éå¸¸é€‚åˆæŠ•ç¨¿ï½ğŸ“¨",
      "ğŸŸ¡ã€å¯æŠ•ç¨¿ã€‘çµæ„Ÿä¸€èˆ¬ï¼Œä½†è‹¥æ–¹å‘æ˜ç¡®å¯ä»¥ä¸€è¯•ï½âœï¸",
      "ğŸ”´ã€ä¸å®œæŠ•ç¨¿ã€‘çŠ¶æ€æ³¢åŠ¨ï¼Œå»ºè®®æ˜å¤©å†æ¥ï½ğŸ˜´",
      "ğŸŸ¢ã€å®œæŠ•ç¨¿ã€‘ä»Šå¤©è¡¨è¾¾åŠ› UPâ†‘ï¼æŠ•ç¨¿æˆåŠŸç‡å¤§å¢ï¼ğŸ”¥",
      "ğŸ”´ã€ä¸å®œæŠ•ç¨¿ã€‘å®¹æ˜“ç²—å¿ƒæˆ–å¡é¡¿ï¼Œé€‚åˆæ•´ç†èµ„æ–™ã€‚ğŸ“‚"
    ];

    const res = options[Math.floor(Math.random() * options.length)];

    localStorage.setItem("submit_date", today);
    localStorage.setItem("submit_text", res);

    document.getElementById("submit-result").innerHTML = res;
  }
</script>
